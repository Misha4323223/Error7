
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOOMERANGS Neural Network Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
        }

        .input-group textarea {
            height: 100px;
            resize: vertical;
        }

        .response-area {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            min-height: 100px;
            white-space: pre-wrap;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #cce8ff;
            color: #004085;
            border: 1px solid #b3d9ff;
        }

        .log-area {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            height: 200px;
            overflow-y: auto;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† BOOOMERANGS Neural Network</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Transformer-based –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é</p>
        </div>

        <div class="dashboard">
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã -->
            <div class="card">
                <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
                <div id="system-status" class="status info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="stats-grid" id="stats-grid">
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                <button class="btn" onclick="loadStats()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
            </div>

            <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ -->
            <div class="card">
                <h3>ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤</h3>
                <div class="input-group">
                    <label for="query-input">–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:</label>
                    <textarea id="query-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."></textarea>
                </div>
                <button class="btn" onclick="generateResponse()" id="generate-btn">
                    üß† –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç
                </button>
                <div id="response-area" class="response-area">
                    –û—Ç–≤–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...
                </div>
            </div>

            <!-- –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ -->
            <div class="card">
                <h3>üî• –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏</h3>
                <div class="input-group">
                    <label for="epochs">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö:</label>
                    <input type="number" id="epochs" value="3" min="1" max="10">
                </div>
                <div class="input-group">
                    <label for="batch-size">–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞:</label>
                    <input type="number" id="batch-size" value="4" min="1" max="16">
                </div>
                <button class="btn" onclick="startTraining()" id="train-btn">
                    üî• –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ
                </button>
                <div id="training-status" class="status info" style="display: none;">
                    –û–±—É—á–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ
                </div>
            </div>

            <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ -->
            <div class="card">
                <h3>üìù –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä –æ–±—É—á–µ–Ω–∏—è</h3>
                <div class="input-group">
                    <label for="example-query">–ó–∞–ø—Ä–æ—Å:</label>
                    <input type="text" id="example-query" placeholder="–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞">
                </div>
                <div class="input-group">
                    <label for="example-response">–û—Ç–≤–µ—Ç:</label>
                    <textarea id="example-response" placeholder="–ñ–µ–ª–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç"></textarea>
                </div>
                <button class="btn" onclick="addTrainingExample()">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä
                </button>
            </div>

            <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
            <div class="card">
                <h3>üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏</h3>
                <button class="btn" onclick="runTests()">üß™ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
                <div id="test-results" class="response-area">
                    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...
                </div>
            </div>

            <!-- –õ–æ–≥–∏ -->
            <div class="card">
                <h3>üìã –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã</h3>
                <div id="logs" class="log-area">
                    –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...
                </div>
                <button class="btn" onclick="clearLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
            </div>
        </div>
    </div>

    <script>
        let logs = [];

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            logs.push(logEntry);
            
            const logsElement = document.getElementById('logs');
            logsElement.textContent = logs.slice(-50).join('\n');
            logsElement.scrollTop = logsElement.scrollHeight;
        }

        function clearLogs() {
            logs = [];
            document.getElementById('logs').textContent = '';
        }

        async function loadStats() {
            try {
                log('üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...');
                
                const response = await fetch('/api/neural/stats');
                const data = await response.json();
                
                if (data.success) {
                    const stats = data.stats;
                    const statusElement = document.getElementById('system-status');
                    const statsGrid = document.getElementById('stats-grid');
                    
                    statusElement.textContent = stats.isInitialized ? 
                        '‚úÖ –ù–µ–π—Ä–æ—Å–µ—Ç—å –∞–∫—Ç–∏–≤–Ω–∞' : '‚ùå –ù–µ–π—Ä–æ—Å–µ—Ç—å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞';
                    statusElement.className = `status ${stats.isInitialized ? 'success' : 'error'}`;
                    
                    statsGrid.innerHTML = `
                        <div class="stat-item">
                            <div class="stat-value">${stats.neural?.vocabSize || 'N/A'}</div>
                            <div class="stat-label">–†–∞–∑–º–µ—Ä —Å–ª–æ–≤–∞—Ä—è</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${stats.neural?.numLayers || 'N/A'}</div>
                            <div class="stat-label">–°–ª–æ—ë–≤</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${stats.neural?.numHeads || 'N/A'}</div>
                            <div class="stat-label">Attention –≥–æ–ª–æ–≤</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${stats.neural?.totalParams || 'N/A'}</div>
                            <div class="stat-label">–ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</div>
                        </div>
                    `;
                    
                    log('‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                } else {
                    throw new Error(data.error);
                }
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: ${error.message}`, 'error');
                document.getElementById('system-status').textContent = '‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è';
                document.getElementById('system-status').className = 'status error';
            }
        }

        async function generateResponse() {
            const queryInput = document.getElementById('query-input');
            const responseArea = document.getElementById('response-area');
            const generateBtn = document.getElementById('generate-btn');
            
            const query = queryInput.value.trim();
            if (!query) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å');
                return;
            }
            
            try {
                generateBtn.disabled = true;
                generateBtn.innerHTML = '<div class="loading"></div> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è...';
                responseArea.textContent = '–ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ—Ç–≤–µ—Ç...';
                
                log(`ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –¥–ª—è: "${query}"`);
                
                const response = await fetch('/api/neural/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ input: query })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    responseArea.textContent = data.response;
                    log('‚úÖ –û—Ç–≤–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω');
                } else {
                    throw new Error(data.error);
                }
                
            } catch (error) {
                responseArea.textContent = `–û—à–∏–±–∫–∞: ${error.message}`;
                log(`‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.innerHTML = 'üß† –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç';
            }
        }

        async function startTraining() {
            const epochs = document.getElementById('epochs').value;
            const batchSize = document.getElementById('batch-size').value;
            const trainBtn = document.getElementById('train-btn');
            const statusElement = document.getElementById('training-status');
            
            try {
                trainBtn.disabled = true;
                trainBtn.innerHTML = '<div class="loading"></div> –û–±—É—á–µ–Ω–∏–µ...';
                statusElement.style.display = 'block';
                statusElement.textContent = '–ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è...';
                statusElement.className = 'status info';
                
                log(`üî• –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è: ${epochs} —ç–ø–æ—Ö, batch size ${batchSize}`);
                
                const response = await fetch('/api/neural/train', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ epochs: parseInt(epochs), batchSize: parseInt(batchSize) })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    statusElement.textContent = 'üî• –û–±—É—á–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ —Ñ–æ–Ω–µ';
                    statusElement.className = 'status success';
                    log('‚úÖ –û–±—É—á–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ');
                } else {
                    throw new Error(data.error);
                }
                
            } catch (error) {
                statusElement.textContent = `–û—à–∏–±–∫–∞: ${error.message}`;
                statusElement.className = 'status error';
                log(`‚ùå –û—à–∏–±–∫–∞ –æ–±—É—á–µ–Ω–∏—è: ${error.message}`, 'error');
            } finally {
                trainBtn.disabled = false;
                trainBtn.innerHTML = 'üî• –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ';
            }
        }

        async function addTrainingExample() {
            const query = document.getElementById('example-query').value.trim();
            const response = document.getElementById('example-response').value.trim();
            
            if (!query || !response) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ –ø–æ–ª—è');
                return;
            }
            
            try {
                log(`üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞: "${query}"`);
                
                const res = await fetch('/api/neural/training-example', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query, response })
                });
                
                const data = await res.json();
                
                if (data.success) {
                    document.getElementById('example-query').value = '';
                    document.getElementById('example-response').value = '';
                    log('‚úÖ –ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω');
                } else {
                    throw new Error(data.error);
                }
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ—Ä–∞: ${error.message}`, 'error');
            }
        }

        async function runTests() {
            const testResults = document.getElementById('test-results');
            
            try {
                testResults.textContent = '–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤...';
                log('üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏');
                
                const response = await fetch('/api/neural/test', { method: 'POST' });
                const data = await response.json();
                
                if (data.success) {
                    let results = '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:\n\n';
                    data.testResults.forEach((result, index) => {
                        results += `${index + 1}. "${result.query}"\n`;
                        if (result.success) {
                            results += `‚úÖ ${result.response}\n\n`;
                        } else {
                            results += `‚ùå ${result.error}\n\n`;
                        }
                    });
                    testResults.textContent = results;
                    log('‚úÖ –¢–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã');
                } else {
                    throw new Error(data.error);
                }
                
            } catch (error) {
                testResults.textContent = `–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}`;
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        // –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.addEventListener('load', () => {
            log('üöÄ Neural Dashboard –∑–∞–ø—É—â–µ–Ω');
            loadStats();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(loadStats, 30000);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ –ø–æ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
        document.getElementById('query-input').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                generateResponse();
            }
        });
    </script>
</body>
</html>
